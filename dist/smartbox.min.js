!function(a){var b=(a.document,[]),c={config:{defaultPlatform:"browser",currentPlatform:""},ready:function(a){b.push(a)},initialise:function(b){var d=this,e=this.utils;a.$$log=e.log.log,a.$$error=e.error,$$log("!!!!!!!!!LOG: initialising SB"),c.platforms.initialise(function(a){d.currentPlatform=a,b&&b.call(d)})}};c.utils={error:function(a){$$log(a,"error")},log:{log:function(){},state:function(){},show:function(){},hide:function(){},startProfile:function(){},stopProfile:function(){}}},$(function(){c.initialise(function(){})}),a.SB=c}(this),!function(){var a,b,c,d={},e=null,f=null;a={addPlatform:function(a){a.name===SB.config.defaultPlatform?f=a:d[a.name]=a},getCurrentPlatform:function(){return e},initialise:function(a){var b=((new Date).getTime(),_.find(d,function(a){return a.detect()}));b=b||f,b?b.addExternalFiles(function(){b.setPlugins(),b.refreshKeys(),b.initialise(),e=b,a&&a.call(this,b)}):$$error("No Platform detected!")}},b=function(a){this.name=a;var b={};this.refreshKeys=function(){b={};for(var a in this.keys)b[this.keys[a]]=a.toLowerCase()},this.getKeyByKeyCode=function(a){return b[a]},SB.platforms.addPlatform(this)},c={externalCss:[],externalJs:[],keys:{},DUID:"",detect:function(){return!1},initialise:function(){},getDUID:function(){return""},getRandomDUID:function(){return(new Date).getTime().toString(16)+Math.floor(Math.random()*parseInt("10000",16)).toString(16)},getNativeDUID:function(){return""},setPlugins:function(){},volumeUp:function(){},volumeDown:function(){},getVolume:function(){},setData:function(){},getData:function(){},removeData:function(){},addExternalFiles:function(a){this.addExternalJS(this.externalJs,a),this.addExternalCss(this.externalCss)},addExternalJS:function(a,b){var c,d=[];a.length?(c=document.createDocumentFragment(),_.each(a,function(a){var b=$.Deferred(),e=document.createElement("script");e.onload=function(){b.resolve(),e.onload=null},e.type="text/javascript",e.src=a,d.push(b),c.appendChild(e)}),document.body.appendChild(c),$.when.apply($,d).done(function(){b&&b.call()})):b&&b.call(this)},addExternalCss:function(a){var b;a.length&&(b=document.createDocumentFragment(),_.each(a,function(a){var c=document.createElement("link");c.rel="stylesheet",c.href=a,b.appendChild(c)}),document.body.appendChild(b))},exit:function(){}},_(b.prototype).extend(c),SB.platforms=a,SB.Platform=b}(this),function(a,b,c){function d(b,c){this.type=b.type,this.currentLayout="",this.previousLayout="",this.$el=a(c),this.$layouts={},this.presets=[],this.initialize(b)}function e(b,c){this.element=b,this.keyboards={},this.init(a.extend({},h,c))}var f="SBKeyboard",g=/([^{]+){{([^}]*)}}/,h={type:"en",keyboardLangs:[],haveNumKeyboard:!1,firstLayout:"en"},i={},j={},k={};j={isShiftActive:!1,isNumsShown:!1,initialize:function(b){var d,e,f="",g=b.haveNumKeyboard;d=SB.keyboardPresets[this.type],this.$wrap=a(c.createElement("div")).addClass("kb-wrap"),"function"==typeof d?(this.presets.push(this.type),f=g?this.generateFull(this.presets,g):this.generateBoard(d,this.type)):d.length&&(this.presets=d,f=this.generateFull(this.presets,g)),this.$wrap.append(f),this.$wrap.addClass("kekekey_"+this.type),this.$el.append(this.$wrap),this.setEvents();for(var h=0;h<this.presets.length;h++)e=this.presets[h],this.$layouts[e]=this.$wrap.find(".keyboard_generated_"+e);g&&(this.presets=_.without(this.presets,"fullnum")),this.changeLayout(b.firstLayout)},generateFull:function(a,b){var c="",d="",e="";a.length>1&&this.$wrap.addClass("kb-multilang"),b&&(this.$wrap.addClass("kb-havenums"),a.push("fullnum"));for(var f=0;f<a.length;f++)e=a[f],d=SB.keyboardPresets[e],c+=this.generateBoard(d,e);return k[this.type]={board:c},c},generateBoard:function(a,b){var c,d,e='<div class="kb-c keyboard_generated_'+b+'">',f="",h={};if(a=a(),k[b])return k[b].board;for(var i=0;i<a.length;i++){c=a[i],f='<div class="kb-row" data-nav_type="hbox">';for(var j=0;j<c.length;j++){if(d=c[j],1==d.length||"&amp;"===d)h={text:d,type:"",letter:d};else{var l=g.exec(d);h.text=l[2]||"",h.type=l[1],h.letter=""}f+='<div class="kbtn nav_target '+h.type+'" data-letter="'+_.escape(h.letter)+'"',h.type&&(f+=' data-keytype="'+h.type+'"'),f+=">"+h.text+"</div>"}e+=f+"</div>"}return e+="</div>",k[b]={board:e},e},onKeyNum:function(b){switch(b.keyName){case"red":this.$el.trigger("backspace");break;default:var c=a.Event({type:"type"});c.letter=""+b.num,this.$el.trigger(c)}b.stopPropagation()},defaultOnKey:function(a){a.stopPropagation()},onKeyDown:function(b){var c,d=a(b.currentTarget),e=d.attr("data-keytype"),f=d.attr("data-letter");if(c=a.Event({type:"type"}),e)switch(e){case"backspace":c="backspace";break;case"delall":c="delall";break;case"complete":c="complete";break;case"space":c.letter=" ";break;case"shift":return this.triggerShiftLetters(),void 0;case"lang":this.changeKeyboardLang();break;case"nums":this.triggerNumKeyboard()}else c.letter=this.isShiftActive?f.toUpperCase():f;c&&this.$el.trigger(c),b.stopPropagation()},triggerShiftLetters:function(){this.isShiftActive?(this.isShiftActive=!1,this.$el.removeClass("shift_active")):(this.isShiftActive=!0,this.$el.addClass("shift_active")),this.$el.find(".kbtn").not(".delall,.complete,.space,.nums,.lang,.shift,.backspace").each(function(){this.innerHTML=shift_active?this.innerHTML.toUpperCase():this.innerHTML.toLowerCase()})},triggerNumKeyboard:function(){this.isNumsShown?(this.isNumsShown=!1,this.changeLayout(this.previousLayout),this.$el.trigger("hide_num")):(this.isNumsShown=!0,this.changeLayout("fullnum"),this.$el.trigger("show_num")),$$nav.current(this.$layouts[this.currentLayout].find(".nums"))},changeKeyboardLang:function(){var a,b=this.presets.indexOf(this.currentLayout);a=(b+1)%this.presets.length,this.changeLayout(this.presets[a]),$$nav.current(this.$layouts[this.currentLayout].find(".lang"))},changeLayout:function(a){var b,c=this.$layouts[a];this.currentLayout&&(b=this.$layouts[this.currentLayout],b&&b.hide(),this.$el.removeClass("keyboard_"+this.currentLayout),this.previousLayout=this.currentLayout),c&&(this.currentLayout=a,this.$el.addClass("keyboard_"+a),c.show())},setEvents:function(){this.$wrap.on("nav_key:yellow nav_key:blue",this.defaultOnKey),this.$wrap.on("nav_key:num nav_key:red",_.bind(this.onKeyNum,this)),this.$wrap.on("click",".kbtn",_.bind(this.onKeyDown,this))},show:function(){this.$wrap.show()},hide:function(){this.$wrap.hide()}},a.extend(d.prototype,j),j=null,i={init:function(a){this.addKeyboard(a),this.element.className="keyboard_popup_wrapper "+a.type+"_wrap keyboard_"+a.firstLayout,this.currentKeyboard=this.keyboards[a.type],this.currentKeyboard.show()},addKeyboard:function(a){this.keyboards[a.type]=new d(a,this.element)}},a.extend(e.prototype,i),i=null,a.fn.SBKeyboard=function(){var b=Array.prototype.slice.call(arguments),c="string"==typeof b[0]&&b[0],d="object"==typeof b[0]&&b[0],g=b.slice(1);return this.each(function(){var b=a.data(this,"plugin_"+f);b?b[c]&&b[c].apply(this,g):a.data(this,"plugin_"+f,new e(this,d))})}}(jQuery,window,document),window.SB=window.SB||{},window.SB.keyboardPresets={en:function(){return["qwertyuiop".split(""),"asdfghjkl".split("").concat(['backspace{{<i class="backspace_icon"></i>}}']),['shift{{<i class="shift_icon"></i>Shift}}'].concat("zxcvbnm".split("")).concat(["delall{{<span>Del<br/>all</span>}}"]),["lang{{en}}","nums{{123}}","space{{}}","complete{{Complete}}"]]},ru:function(){return["йцукенгшщзхъ".split(""),"фывапролджэ".split("").concat(['backspace{{<i class="backspace_icon"></i>}}']),['shift{{<i class="shift_icon"></i>Shift}}'].concat("ячсмитьбю".split("")).concat(["delall{{<span>Del<br/>all</span>}}"]),["lang{{ru}}","nums{{123}}","space{{}}","complete{{Готово}}"]]},email:function(){return["1234567890@".split(""),"qwertyuiop".split("").concat(['backspace{{<i class="backspace_icon"></i>}}']),"asdfghjkl_".split("").concat(["delall{{<span>Del<br/>all</span>}}"]),"zxcvbnm-.".split("").concat("ok{{}}")]},num:function(){return["123".split(""),"456".split(""),"789".split(""),['backspace{{<i class="backspace_icon"></i>}}',"0","num_complete complete{{}}"]]},fullnum:function(){return["1234567890".split(""),'-/:;()$"'.split("").concat(["&amp;",'backspace{{<i class="backspace_icon"></i>}}']),["nums{{ABC}}"].concat("@.,?!'+".split("")),["space{{}}","complete{{OK}}"]]},fulltext_ru:["en","ru"]},function(a){var b,c,d,e,f={},g={},h=[],i=0,j=20;b=$("<div></div>",{id:"log"}),b.appendTo(document.body),c=$("<div></div>",{"class":"log-row"}),e=function(a){this.name=a,this.logs=0,this.states={};var b=$("#log_"+this.name);this.$content=b.find(".log_content"),this.$state=b.find(".log_states"),b=null},_.extend(e.prototype,{log:function(a){var b,d,e=c.clone();this.logs++,a=_.escape(a),e.html(a).appendTo(this.$content),this.logs>j&&(b=this.$content.find(".log-row"),d=b.length,b.slice(0,d-j).remove(),this.logs=b.length)},state:function l(a,b){var l=this.states[b]||this.createState(b);l.textContent=b+": "+a},createState:function(a){var b=document.createElement("div");return b.id="#log_"+this.name+"_"+a,this.states[a]=b,this.$state.append(b),b}});var k=_.template('<div class="log_pane" id="log_<%= name %>"><div class="log_name">Log: <%=name%></div><div class="log_content_wrap"><div class="log_content"></div></div><div class="log_states"></div></div>');d={create:function(a){return b.append(k({name:a})),g[a]=new e(a),h.push(a),g[a]},getPanel:function(a){return a=a||"default",g[a]||this.create(a)}},a.SB.utils.log={log:function(a,b){d.getPanel(b).log(a)},state:function(a,b,c){d.getPanel(c).state(a,b)},show:function(a){a=a||h[i],a?(i++,b.show(),$(".log_pane").hide(),$("#log_"+a).show()):(i=0,this.hide())},hide:function(){b.hide()},startProfile:function(a){a&&(f[a]=(new Date).getTime())},stopProfile:function(a){f[a]&&(this.log(a+": "+((new Date).getTime()-f[a])+"ms","profiler"),delete f[a])}}}(this),$(document.body).on("nav_key:tools",function(){SB.utils.log.show()}),!function(a,b){function c(){function a(a){var b,d={},e=a.keyCode;!m&&j&&(b=SB.currentPlatform.getKeyByKeyCode(e),l.indexOf(b)>-1?f(b):(k.indexOf(b)>-1&&(d.num=b[1],b="num"),c(b,d)))}function c(a,b){var c,d;j&&(c=$.Event("nav_key:"+a,b||{}),d=$.Event("nav_key"),c.keyName=a,d.keyName=a,j.trigger(c),j&&j.trigger(d))}function f(a){var b=i[a];b||(b=i[a]=_.throttle(function(){c(a)},800,{leading:!0})),b(a)}function g(){j&&j.click()}var h=[],i={},j=null,k=["n0","n1","n2","n3","n4","n5","n6","n7","n8","n9"],l=["green","red","yellow","red"],m=0;return{area_selector:".nav-item",higlight_class:"focus",$container:null,loopType:null,phantom_selector:"[data-nav-phantom]",isPaused:function(){return!!m},pause:function(){return m++,this},resume:function(a){return m--,(0>m||a)&&(m=0),this},save:function(){return h.push({navCur:j,area_selector:this.area_selector,higlight_class:this.higlight_class,$container:this.$container}),this},restore:function(){if(h.length){this.off();var a=h.pop();this.area_selector=a.area_selector,this.higlight_class=a.higlight_class,this.on(a.$container,a.navCur)}return this},current:function(a,b){if(!a)return j;b=b||"nav_key";var c=$(a);if(c.is(this.phantom_selector)&&(c=$($(c.attr("data-nav-phantom"))[0])),c.length>1)throw new Error("Focused element must be only one!");if(!c.length)return this;var d=j;return j&&j.removeClass(this.higlight_class).trigger("nav_blur",[b,c]),j=c,c.addClass(this.higlight_class).trigger("nav_focus",[b,d]),this},on:function(b,c){var d,f=this;return e=e||$(document.body),this.off(),this.$container=b?$(b):e,this.$container.on("mouseenter.nav",this.area_selector,function(){$(this).is(f.phantom_selector)||f.current(this,"mouseenter")}),d=this.$container.find("[data-nav_type]"),this.$container.attr("data-nav_type")&&(d=d.add(this.$container)),d.each(function(){var a=$(this),b=a.attr("data-nav_type");a.removeAttr("data-nav_type");var c=a.attr("data-nav_loop");f.siblingsTypeNav(a,b,c)}),e.bind("keydown.navigation",a).bind("nav_key:enter.navigation",g),c||(c=this.$container.find(this.area_selector).filter(":visible")[0]),this.current(c),this},siblingsTypeNav:function(a,b,c){var e=this;a.on("nav_key:left nav_key:right nav_key:up nav_key:down",this.area_selector,function(f){var g,h="last",i=e.current();if("hbox"==b&&"left"==f.keyName||"vbox"==b&&"up"==f.keyName?g="prev":("hbox"==b&&"right"==f.keyName||"vbox"==b&&"down"==f.keyName)&&(g="next"),"next"==g&&(h="first"),g){for(var j=i[g](e.area_selector);j.length&&!j.is(":visible");)j=j[g](e.area_selector);if(!j.length&&c&&(j=a.find(e.area_selector).filter(":visible")[h]()),j.length)return d.current(j),!1}})},off:function(){return j&&j.removeClass(this.higlight_class).trigger("nav_blur"),this.$container&&this.$container.off("mouseenter.nav").off(".loop"),e.unbind(".navigation"),j=null,this},findSome:function(){var a;return j&&j.is(":visible")||(a=this.$container.find(this.area_selector).filter(":visible").eq(0),this.current(a)),this},findNav:function(a,b,c){function d(a,b,c){var d=null;switch(c){case"left":case"right":if(a.top>b.top&&(d=b,b=a,a=d),a.bottom>b.top)return a.top>b.right?b.top-a.right:b.height;break;case"up":case"down":if(a.left>b.left&&(d=b,b=a,a=d),a.right>b.left)return a.left>b.right?b.left-a.right:b.width}return!1}var e=this.checkUserDefined(a,b);if(e)return e;var f,g,h,i,j=a[0].getBoundingClientRect(),k=[],l=null;for(h=0,i=c.length;i>h;h++)if(l=c[h].getBoundingClientRect(),l.left!=j.left||l.top!=j.top){switch(b){case"left":f=j.left>l.left;break;case"right":f=j.right<l.right;break;case"up":f=j.top>l.top;break;case"down":f=j.bottom<l.bottom}f&&k.push({obj:c[h],bounds:l})}var m=9999999,n=9999999,o=9999999,p=0,q=0,r=0,s=0,t=!1,u=!1;for(h=0,i=k.length;i>h;h++)if(this.checkEntryPoint(k[h].obj,b)){var v=k[h].bounds,w=d(j,v,b);if(q=Math.abs(v.top-j.top),r=Math.abs(v.left-j.left),s=Math.sqrt(q*q+r*r),!t||w)if(!w||t){switch(b){case"left":case"right":g=t?n>r||r==n&&m>q:m>q||q==m&&n>r;break;case"up":case"down":g=t?m>q||q==m&&n>r:n>r||r==n&&m>q}g&&(m=q,n=r,o=s,u=k[h].obj)}else m=q,n=r,p=w,u=k[h].obj,t=!0}return u},checkUserDefined:function(a,b){var c=a.attr("data-nav_ud"),d=!1,e=a.attr("data-nav_ud_"+b);if(!c||!e)return!1;if(!e){var f=c.split(","),g=["up","right","left","bottom"];a.attr({"data-nav_ud_up":f[0],"data-nav_ud_right":f[1],"data-nav_ud_down":f[2],"data-nav_ud_left":f[3]}),e=f[g.indexOf(b)]}return"none"==e?d="none":e&&(d=$(e).first()),d},checkEntryPoint:function(a,c){var d=$(a),e=d.attr("data-nav_ep"),f=null;if(!e)return!0;if(f=d.attr("data-nav_ep_"+c),f===b){var g=e.split(",");d.attr("data-nav_ep_top",g[0]),d.attr("data-nav_ep_right",g[1]),d.attr("data-nav_ep_bottom",g[2]),d.attr("data-nav_ep_left",g[3]),f=d.attr("data-nav_ep_"+c)}return!!parseInt(f)}}}var d,e=null;d=a.$$nav=new c,$(function(){$("body").bind("nav_key:left nav_key:right nav_key:up nav_key:down",function(a){var b,c,e=d.current();b=d.$container.find(d.area_selector).filter(":visible"),c=d.findNav(e,a.keyName,b),c&&d.current(c)})})}(this),function(a){var b,c,d,e=0,f=function(a){a._state="play",b=setInterval(function(){a.trigger("update"),a.videoInfo.currentTime+=.5,a.videoInfo.currentTime>=a.videoInfo.duration&&(a.stop(),a.trigger("complete"))},500)},g=a.Player={init:function(){},_state:"stop",play:function(a){this.stop(),this._state="play",this._play(a)},_play:function(){var a=this;setTimeout(function(){a.trigger("ready"),setTimeout(function(){a.trigger("bufferingBegin"),setTimeout(function(){a.videoInfo.currentTime=0,a.trigger("bufferingEnd"),f(a)},1e3)},1e3)},1e3)},stop:function(a){"stop"!=this._state&&(this._stop(),a||this.trigger("stop")),this._state="stop"},pause:function(){this._stop(),this._state="pause"},resume:function(){f(this)},togglePause:function(){"play"==this._state?this.pause():this.resume()},_stop:function(){clearInterval(b)},formatTime:function(a){var b=Math.floor(a/3600),c=a%3600,d=Math.floor(c/60),e=c%60,a=Math.ceil(e);return 10>a&&(a="0"+a),10>d&&(d="0"+d),(b?b+":":"")+d+":"+a},videoInfo:{duration:31,width:640,height:360,currentTime:0},autoInit:!1,seek:function(a){var b=this;b.videoInfo.currentTime=a,b.pause(),b.trigger("bufferingBegin"),setTimeout(function(){b.trigger("bufferingEnd"),b.resume()},500)},audio:{set:function(a){e=a},get:function(){for(var a=2,b=[],c=0;a>c;c++)b.push(0);return b},cur:function(){return e}}};a._&&_.extend?c=_.extend:a.$&&$.extend&&(c=$.extend),a.EventEmitter?d=EventEmitter.prototype:a.Backbone?d=Backbone.Events:a.Events&&(d=Events.prototype),g.extend=function(a){c(this,a)},g.extend(d),$(function(){g.autoInit&&$("body").on("load",function(){g.init()})})}(this),function(a){var b,c={},d=function(a,b,c){switch(a.keyName){case"red":e.type(b,"backspace",c);break;default:e.type(b,a.num,c)}a.stopPropagation()},e={format:function(a,b){var d=a.attr("id"),e=c[d]||{},f=b;return e.formatText&&(f=e.formatText(b)),f},startBlink:function(a){b&&clearInterval(b);var c=a.parent().find(".smart_input-cursor");b=setInterval(function(){c.toggleClass("smart_input-cursor_hidden")},500)},stopBlink:function(a){b&&(clearInterval(b),a.parent().find(".smart_input-cursor").addClass("smart_input-cursor_hidden"))},setText:function(a,b){var d=a.attr("id"),e=c[d]||{},f=a.attr("data-max");b.length>f&&0!=f&&(b=b.substr(0,f));var g=b;e.formatText&&(g=e.formatText(b));var h=a.parent().find(".smart_input-wrap"),i=h.find(".smart_input-text");a.val(b).change(),g.length>1?h[(i.width()>h.width()?"add":"remove")+"Class"]("smart_input-wrap_right"):h.removeClass("smart_input-wrap_right")},type:function(a,b,c){var d=a.val();d||(d=""),"backspace"==b?d=d.substr(0,d.length-1):"delall"==b?d="":d+=b,e.setText(a,d),d.length==c.max&&0!=c.max&&void 0!==c.next&&(e.hideKeyboard(a),$$nav.current(c.next),$$nav.current().click())},hideKeyboard:function(b,c){var d=b.parent();d.removeClass("smart-input-active"),b.trigger("keyboard_hide"),a("#keyboard_overlay").hide(),$$nav.restore(),a.voice.restore(),b.data("keyboard_active",!1),c?b.trigger("keyboard_complete"):b.trigger("keyboard_cancel"),a("#keyboard_popup").trigger("keyboard_hide")},showKeyboard:function(b,c){b.data("keyboard_active",!0);var d=b.parent();d.addClass("smart-input-active");var f=b.height(),g=b.offset(),h=g.top+f,i=a("#keyboard_popup");console.log(c.keyboard),i.SBKeyboard(c.keyboard).css({left:g.left,top:h}).off("type backspace delall complete cancel").on("type",function(a){e.type(b,a.letter,c)}).on("backspace",function(){e.type(b,"backspace",c)}).on("delall",function(){e.type(b,"delall",c)}).on("complete cancel",function(a){var c=!1;"complete"===a.type&&(c=!0),e.hideKeyboard(b,c),e.stopBlink()}),a("#keyboard_overlay").show();var j=i.height(),k=i.width();h+j>680&&i.css({top:h-j-f}),g.left+k>1280&&i.css({left:1280-k-20}),$$nav.save(),$$nav.on("#keyboard_popup"),a("#keyboard_popup").SBKeyboard("refreshVoice"),b.addClass($$nav.higlight_class),a("#keyboard_popup").trigger("keyboard_show")},bindEvents:function(b){var f=b.parent();f.off("nav_focus nav_blur click");var g=c[b.attr("id")];console.log(g);var h=f.find(".sig-cursor");g.bindKeyboard&&(g.keyboard=!1),g.keyboard&&f.on("click",function(){e.startBlink(h),e.showKeyboard(b,g)}),b.on({startBlink:function(){e.startBlink(h)},stopBlink:function(){e.stopBlink()},hideKeyboard:function(){f.hasClass("smart-input-active")&&e.hideKeyboard(b)},showKeyboard:function(){e.showKeyboard(b,g)}}),g.bindKeyboard&&g.bindKeyboard.off("type backspace delall").on("type",function(a){e.type(b,a.letter,g)}).on("backspace",function(){e.type(b,"backspace",g)}).on("delall",function(){e.type(b,"delall",g)}),f.on("nav_focus",function(){g&&(g.noKeyboard||g.bindNums)&&$self.unbind("nav_key:num nav_key:red").bind("nav_key:num nav_key:red",function(a){d(a,b,g)})}),f.on("nav_blur",function(){var b=a(this);g.keyboard||b.unbind("nav_key:num nav_key:red")})},extend:function(a,b,c){e[b]=c},defaults:function(a,b){_.extend(f,b)}},f={keyboard:{type:"fulltext_ru",firstLang:"ru",haveNumKeyboard:!0},directKeyboardInput:!0,max:0,next:null,decorate:function(b,c){var d=b[0].className,f=a('            <div class="smart_input-container '+d+'">\n                <div class="smart_input-wrap">\n                    <span class="smart_input-text"></span>\n                    <span class="smart_input-cursor smart_input-cursor_hidden"></span>\n                </div>\n                <b class="smart_input-decor-l"></b>\n                <b class="smart_input-decor-r"></b>\n                <b class="smart_input-decor-c"></b>\n            </div>');b.hide().after(f),f.append(b);var g=f.find(".smart_input-text");b.on({change:function(){g.html(this.value)}}),c.directKeyboardInput&&b.parent().on({nav_focus:function(){e.startBlink(b),a("body").on("keypress.smartinput",function(a){if(a.charCode){a.preventDefault();var d=String.fromCharCode(a.charCode);e.type(b,d,c)}else switch(a.keyCode){case 8:a.preventDefault(),e.type(b,"backspace",c)}})},nav_blur:function(){e.stopBlink(b),a("body").off("keypress.smartinput")}}),e.bindEvents(b),e.setText(b,b.val(),c)}};a.fn.smartInput=function(b){if("string"==typeof b){var d=e[b],g=Array.prototype.slice.call(arguments,1);return g.unshift(this),d.apply(null,g)}return this.each(function(){var d=_.clone(b);d||(d={}),d=a.extend({},f,d);var g=a(this);this.id||(this.id=_.uniqueId("smartInput")),d.next=g.attr("data-next")||d.next,d.max=g.attr("data-max")||d.max||0,c[this.id]=d,d.decorate(g,d),g.attr({"data-value":"","data-max":d.max}),e.bindEvents(g)}),this},a(function(){a("body").append('<div id="keyboard_overlay"><div class="keyboard_popup_wrapper" id="keyboard_popup"></div></div>')})}(jQuery),Player.extend({init:function(){var a=this,b=window.innerWidth,c=window.innerHeight;this.$video_container=$('<video id="smart_player" style="position: absolute; left: 0; top: 0;width: '+b+"px; height: "+c+'px;"></video>');var d=this.$video_container[0];$("body").append(this.$video_container),this.$video_container.on("loadedmetadata",function(){a.videoInfo.width=d.videoWidth,a.videoInfo.height=d.videoHeight,a.videoInfo.duration=d.duration,a.trigger("ready")}),this.$video_container.on("loadstart",function(){a.trigger("bufferingBegin")}).on("playing",function(){a.trigger("bufferingEnd")}).on("timeupdate",function(){a.videoInfo.currentTime=d.currentTime,a.trigger("update")}).on("ended",function(){a._state="stop",a.trigger("complete")}),this.$video_container.on("abort canplay canplaythrough canplaythrough durationchange emptied ended error loadeddata loadedmetadata loadstart mozaudioavailable pause play playing ratechange seeked seeking suspend volumechange waiting",function(){})},_play:function(a){this.$video_container.attr("src",a.url),this.$video_container[0].play()},_stop:function(){this.$video_container[0].pause(),this.$video_container[0].src=""},pause:function(){this.$video_container[0].pause(),this._state="pause"},resume:function(){this.$video_container[0].play(),this._state="play"},seek:function(a){this.$video_container[0].currentTime=a},audio:{set:function(){},get:function(){},cur:function(){}}}),!function(a){var b,c=new a.SB.Platform("browser");b={keys:{RIGHT:39,LEFT:37,DOWN:40,UP:38,RETURN:27,EXIT:46,TOOLS:32,FF:33,RW:34,NEXT:107,PREV:109,ENTER:13,RED:65,GREEN:66,YELLOW:67,BLUE:68,CH_UP:221,CH_DOWN:219,N0:48,N1:49,N2:50,N3:51,N4:52,N5:53,N6:54,N7:55,N8:56,N9:57,PRECH:45,SMART:36,PLAY:97,STOP:98,PAUSE:99,SUBT:76,INFO:73,REC:82},detect:function(){return!0},initialise:function(){},getNativeDUID:function(){return this.DUID=-1!=navigator.userAgent.indexOf("Chrome")?"CHROMEISFINETOO":"FIREFOXISBEST",this.DUID},volumeUp:function(){},volumeDown:function(){},getVolume:function(){},setData:function(a,b){localStorage.setItem(a,JSON.stringify(b))},getData:function(a){var b;try{b=JSON.parse(localStorage.getItem(a))}catch(c){}return b},removeData:function(a){localStorage.removeItem(a)}},_(c).extend(b)}(this),-1!=navigator.userAgent.toLowerCase().indexOf("netcast")&&!function(){var a,b=!1;Player.extend({updateDelay:500,init:function(){var a=this;$("body").append('<object type="video/mp4" data="" width="1280" height="720" id="pluginPlayer" style="z-index: 1; position: absolute; left: 0; top: 0;"></object>'),this.plugin=$("#pluginPlayer")[0],this.$plugin=$(this.plugin),this.plugin.onPlayStateChange=function(){a.onEvent.apply(a,arguments)},this.plugin.onBuffering=function(){a.onBuffering.apply(a,arguments)}},_update:function(){var a=this.plugin.mediaPlayInfo();a&&!b&&(b=!0,this.trigger("ready"),this.videoInfo={duration:a.duration/1e3}),this.trigger("update")},onBuffering:function(a){this.trigger(a?"bufferingBegin":"bufferingEnd")},_play:function(c){clearInterval(a),a=setInterval(function(){Player._update()},this.updateDelay),b=!1,this.plugin.data=c.url,this.plugin.play(1)},_stop:function(){this.plugin.stop()}})}(),function(){var a,b,c,d,e=window.localStorage;if(_.isFunction(window.FileSystem)){if(a=new FileSystem,b=a.isValidCommonPath(curWidget.id),b||a.createCommonDir(curWidget.id),c=curWidget.id+"_localStorage.db",d=a.openCommonFile(c,"r+"))try{JSON.parse(d.readAll())}catch(f){e&&e.clear()}else d=a.openCommonFile(c,"w"),d.writeAll("{}");if(a.closeCommonFile(d),!e){var g={},h=!1,i=_.debounce(function(){h&&(d=a.openCommonFile(c,"w"),d.writeAll(JSON.stringify(window.localStorage)),a.closeCommonFile(d),h=!1)},100);g.setItem=function(a,b){return h=!0,this[a]=b,i(),this[a]},g.getItem=function(a){return this[a]},g.removeItem=function(a){delete this[a],i()},g.clear=function(){var a=this;for(var b in a)"function"!=typeof a[b]&&delete a[b];i()},window.localStorage=g}}}(),-1!=navigator.userAgent.toLowerCase().indexOf("maple")&&!function(){var a=0,b=function(a,b,c){try{switch(c.length){case 0:return a[b]();case 1:return a[b](c[0]);case 2:return a[b](c[0],c[1]);case 3:return a[b](c[0],c[1],c[2]);case 4:return a[b](c[0],c[1],c[2],c[3]);case 5:return a[b](c[0],c[1],c[2],c[3],c[4]);case 6:return a[b](c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return a[b](c[0],c[1],c[2],c[3],c[4],c[5],c[6]);case 8:return a[b](c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7])}}catch(d){throw d}};Player.extend({usePlayerObject:!1,init:function(){var a=this;if(a.usePlayerObject?(a.plugin=document.getElementById("pluginPlayer"),$("body").append(a.$plugin)):a.plugin=sf.core.sefplugin("Player"),!a.plugin)throw new Error("failed to set plugin");a.plugin.OnStreamInfoReady="Player.OnStreamInfoReady",a.plugin.OnRenderingComplete="Player.OnRenderingComplete",a.plugin.OnCurrentPlayTime="Player.OnCurrentPlayTime",a.plugin.OnCurrentPlaybackTime="Player.OnCurrentPlayTime",a.plugin.OnBufferingStart="Player.OnBufferingStart",a.plugin.OnBufferingComplete="Player.OnBufferingComplete",a.plugin.OnEvent="Player.onEvent"},seek:function(a){0>=a&&(a=0);var b=Math.floor(a-this.videoInfo.currentTime-1);this.videoInfo.currentTime=a,alert("jump: "+b),0>b?this.doPlugin("JumpBackward",-b):this.doPlugin("JumpForward",b)},onEvent:function(a,b){switch(a){case 9:this.OnStreamInfoReady();break;case 4:break;case 8:this.OnRenderingComplete();break;case 14:this.OnCurrentPlayTime(b);break;case 13:break;case 12:this.OnBufferingComplete();break;case 11:this.OnBufferingStart()}},OnRenderingComplete:function(){alert("PLAYER COMPLETE"),Player.trigger("complete")},OnStreamInfoReady:function(){var a,b,c,d;try{a=this.doPlugin("GetDuration")}catch(e){alert("######## "+e.message)}if(a=Math.ceil(a/1e3),this.usePlayerObject)b=this.doPlugin("GetVideoWidth"),c=this.doPlugin("GetVideoHeight");else if(d=this.doPlugin("GetVideoResolution"),-1==d)b=0,c=0;else{var f=d.split("|");b=f[0],c=f[1]}this.videoInfo.duration=a,this.videoInfo.width=1*b,this.videoInfo.height=1*c,this.trigger("ready")},OnBufferingStart:function(){this.trigger("bufferingBegin")},OnBufferingComplete:function(){this.trigger("bufferingEnd")},OnCurrentPlayTime:function(a){"play"==this._state&&(alert(a/1e3),this.videoInfo.currentTime=a/1e3,this.trigger("update"))},_play:function(a){var b=a.url;switch(a.type){case"hls":b+="|COMPONENT=HLS"}this.doPlugin("InitPlayer",b),this.doPlugin("StartPlayback",a.from||0)},_stop:function(){this.doPlugin("Stop")},doPlugin:function(){var a,c=this.plugin,d=arguments[0],e=Array.prototype.slice.call(arguments,1,arguments.length)||[];return this.usePlayerObject?a=b(c,d,e):(-1!=d.indexOf("Buffer")&&(d+="Size"),e.unshift(d),a=b(c,"Execute",e)),a},audio:{set:function(b){Player.doPlugin("SetStreamID",1,b),a=b},get:function(){for(var a=Player.doPlugin("GetTotalNumOfStreamID",1),b=[],c=0;a>c;c++)b.push(Player.doPlugin("GetStreamLanguageInfo",1,c));return b},cur:function(){return a}}})}(),!function(a){var b,c=new a.SB.Platform("samsung"),d={audio:"SAMSUNG-INFOLINK-AUDIO",pluginObjectTV:"SAMSUNG-INFOLINK-TV",pluginObjectTVMW:"SAMSUNG-INFOLINK-TVMW",pluginObjectNetwork:"SAMSUNG-INFOLINK-NETWORK",pluginObjectNNavi:"SAMSUNG-INFOLINK-NNAVI"},e=!1;if(e=navigator.userAgent.search(/Maple/)>-1){var f="";for(var g in d)f+="<object id="+g+' border=0 classid="clsid:'+d[g]+'" style="opacity:0.0;background-color:#000000;width:0px;height:0px;"></object>';document.write(f)}b={keys:{},externalJs:["$MANAGER_WIDGET/Common/af/../webapi/1.0/deviceapis.js","$MANAGER_WIDGET/Common/af/../webapi/1.0/serviceapis.js","$MANAGER_WIDGET/Common/af/2.0.0/extlib/jquery.tmpl.js","$MANAGER_WIDGET/Common/Define.js","$MANAGER_WIDGET/Common/af/2.0.0/sf.min.js","$MANAGER_WIDGET/Common/API/Widget.js","$MANAGER_WIDGET/Common/API/TVKeyValue.js","$MANAGER_WIDGET/Common/API/Plugin.js","src/platforms/samsung/localstorage.js"],$plugins:{},detect:function(){return e},initialise:function(){},getNativeDUID:function(){return this.$plugins.pluginObjectNNavi.GetDUID(this.getMac())},getMac:function(){return this.$plugins.pluginObjectNetwork.GetMAC()},getSDI:function(){return this.SDI=this.SDIPlugin.Execute("GetSDI_ID"),this.SDI},getHardwareVersion:function(){var a=this.firmware.match(/\d{4}/)||[];return this.hardwareVersion="2013"===a[0]?sf.core.sefplugin("Device").Execute("Firmware"):null,this.hardwareVersion},setPlugins:function(){var a=this;_.each(d,function(b,c){a.$plugins[c]=document.getElementById(c)}),this.$plugins.SDIPlugin=sf.core.sefplugin("ExternalWidgetInterface"),this.$plugins.tvKey=new Common.API.TVKeyValue;var b=this.$plugins.pluginObjectNNavi,c=this.$plugins.pluginObjectTV;this.modelCode=b.GetModelCode(),this.firmware=b.GetFirmware(),this.systemVersion=b.GetSystemVersion(0),this.productCode=c.GetProductCode(1),this.pluginAPI=new Common.API.Plugin,this.widgetAPI=new Common.API.Widget,this.productType=c.GetProductType(),this.setKeys(),this.pluginAPI.unregistKey(sf.key.KEY_VOL_UP),this.pluginAPI.unregistKey(sf.key.KEY_VOL_DOWN),this.pluginAPI.unregistKey(sf.key.KEY_MUTE),b.SetBannerState(2)},setKeys:function(){this.keys=sf.key},enableScreenSaver:function(a){a=a||!1,sf.service.setScreenSaver(!0,a)},disableScreenSaver:function(){sf.service.setScreenSaver(!1)},exit:function(){sf.core.exit(!1)},blockNavigation:function(){sf.key.preventDefault()}},_.extend(c,b)}(this);